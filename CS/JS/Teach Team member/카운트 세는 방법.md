# 카운트 세는 방법
---
## 작성하게 된 이유
코드를 작성하다 보니 특정 상태 값을 가진 데이터들의 개수를 세는 경우가 있었습니다.
개수를 세기 위해서 반복문도 두 번, 변수도 두 번 선언해서 사용해야 하는 번거로움이 있어서 \'*짧은 코드와  효율적인 알고리즘* \'을 소개하려고 작성했습니다.

## 기대되는 효과
코드가 짧아지기 때문에 가독성이 좋아집니다. 예제는 selRows의 하나의 속성의 개수를 세지만 여러 개의 속성의 타입별 개수를 구해야 할 때는 길어지는 코드의 양이 배로 늘어나게 됩니다.

### 수정 전 코드
```javascript
var selRows = $("#grid").dxDataGrid("instance").getSelectedRowsData();
var sttusArr = [];
for(var i=0; i < selRows.length; i++){
	var status = selRows[i].status_nm; //처리구분명
	var statusCd = selRows[i].status_cd; //처리구분 코드
	//미처리가 아닌건
	if(statusCd != "A"){
		sttusArr.push({key:status, value:1});//처리구분
	}
}

var resultStatus = {};

$.each(sttusArr, function(index, item) {
  var key = item.key;
  if (resultStatus[key] === undefined) {
	resultStatus[key] = 1;
  } else {
	resultStatus[key]++;
  }
});

var resultStatusKeys = Object.keys(resultStatus);

var txt = "▷ 미처리건이 아닌 상태의 종류 : " + resultStatusKeys.length + "개</br>"
```

### 수정 후 코드
```javascript
var selRows = $("#grid").dxDataGrid("instance").getSelectedRowsData();
var sttusArr = {};//변수명을 동일하게 작성했지만 array 형식이 아닌 object 형식입니다.

selRows.map(row => { //for문을 사용해도 됩니다. 이 코드에서 중요하지 않습니다.
	const status = row.status_nm;
	const statusCd = row.status_cd;

	if(statusCd != "A"){
		//js의 object의 장점은 키값이 존재하지 않을 때도 에러를 표시하지 않고 undefined만을 반환합니다.
		//그러면 에러를 피할 수 있습니다. undefined, -1,0, null, ""(빈 string) 의 경우,
		// !로 true를 반환하고 !!로 false를 반환합니다.
		// sttusArr[status]++ 는 해당 값을 1 추가해주기 때문에 
		// sttusArr[status] += 1; 의 코드와 동일하게 작동합니다.
		// 삼항연산자를 활용해서 아래의 코드를 실행하면 키와 값이 추가됩니다.
		// sttusArr[status] = 1
		sttusArr[status] = !!sttusArr[status] ? sttusArr[status]++ : 1; 
	}
})

//작성을 안해도 되는 코드
//$.each(sttusArr, function(index, item) {
//  var key = item.key;
//  if (resultStatus[key] === undefined) {
//	resultStatus[key] = 1;
//  } else {
//	resultStatus[key]++;
//  }
//});

var resultStatusKeys = Object.keys(sttusArr);

var txt = "▷ 미처리건이 아닌 상태의 종류 : " + sttusArr.length + "개</br>"
```
